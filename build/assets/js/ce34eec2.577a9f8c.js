"use strict";(self.webpackChunkangular_workshop=self.webpackChunkangular_workshop||[]).push([[3856],{9613:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(9496);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,s=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=l(t),d=o,f=m["".concat(c,".").concat(d)]||m[d]||u[d]||s;return t?r.createElement(f,a(a({ref:n},p),{},{components:t})):r.createElement(f,a({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var s=t.length,a=new Array(s);a[0]=d;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i[m]="string"==typeof e?e:o,a[1]=i;for(var l=2;l<s;l++)a[l]=t[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7781:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var r=t(1163),o=(t(9496),t(9613));const s={sidebar_position:3,id:"reuse_component",tags:["exercise","basic","component","testing","unit","jest","signal"],description:"Add props and events to an existing component."},a="Increase Reusability",i={unversionedId:"exercises/basic/atomic-component/reuse_component",id:"exercises/basic/atomic-component/reuse_component",title:"Increase Reusability",description:"Add props and events to an existing component.",source:"@site/docs/exercises/basic/atomic-component/reusable-component.md",sourceDirName:"exercises/basic/atomic-component",slug:"/exercises/basic/atomic-component/reuse_component",permalink:"/angular-workshop/docs/exercises/basic/atomic-component/reuse_component",draft:!1,tags:[{label:"exercise",permalink:"/angular-workshop/docs/tags/exercise"},{label:"basic",permalink:"/angular-workshop/docs/tags/basic"},{label:"component",permalink:"/angular-workshop/docs/tags/component"},{label:"testing",permalink:"/angular-workshop/docs/tags/testing"},{label:"unit",permalink:"/angular-workshop/docs/tags/unit"},{label:"jest",permalink:"/angular-workshop/docs/tags/jest"},{label:"signal",permalink:"/angular-workshop/docs/tags/signal"}],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,id:"reuse_component",tags:["exercise","basic","component","testing","unit","jest","signal"],description:"Add props and events to an existing component."},sidebar:"tutorialSidebar",previous:{title:"Testing",permalink:"/angular-workshop/docs/exercises/basic/atomic-component/basic_component_test"},next:{title:"Routing",permalink:"/angular-workshop/docs/category/routing"}},c={},l=[{value:"User Profile Card",id:"user-profile-card",level:2},{value:"Goal architecture",id:"goal-architecture",level:3},{value:"Lets go",id:"lets-go",level:3},{value:"Solution",id:"solution",level:3}],p={toc:l},m="wrapper";function u(e){let{components:n,...s}=e;return(0,o.kt)(m,(0,r.Z)({},p,s,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"increase-reusability"},"Increase Reusability"),(0,o.kt)("h2",{id:"user-profile-card"},"User Profile Card"),(0,o.kt)("admonition",{title:"Exercise",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Add the possibility to pass user data from the parent using HTML params (",(0,o.kt)("inlineCode",{parentName:"p"},"@Input"),").",(0,o.kt)("br",{parentName:"p"}),"\n","And ensure the show more click can be handled on parent level (",(0,o.kt)("inlineCode",{parentName:"p"},"@Output"),").")),(0,o.kt)("p",null,"This can be used als UI draft:\n",(0,o.kt)("img",{alt:"User Profile Card Draft",src:t(659).Z,width:"1040",height:"200"})),(0,o.kt)("p",null,"For the user data you can assume ",(0,o.kt)("inlineCode",{parentName:"p"},"User")," as object interface."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="user.model.ts"',title:'"user.model.ts"'},"export interface User {\n    firstName: string,\n    lastName: string,\n    mail: string;\n}\n")),(0,o.kt)("h3",{id:"goal-architecture"},"Goal architecture"),(0,o.kt)("mermaid",{value:'graph TD\n    parentComp["Parent component"]\n    upcComp["UserProfileCardComponent"]\n    parentComp -- INPUT: user data --\x3e upcComp\n    upcComp -- OUTPUT: show more clicked --\x3e parentComp'}),(0,o.kt)("h3",{id:"lets-go"},"Lets go"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/ex-base-testing-component?file=src%2Fapp%2Fuser-profile-card%2Fuser-profile-card.component.ts"},(0,o.kt)("img",{parentName:"a",src:"https://developer.stackblitz.com/img/open_in_stackblitz.svg",alt:"Fork base from StackBlitz"}))),(0,o.kt)("h3",{id:"solution"},"Solution"),(0,o.kt)("details",null,(0,o.kt)("summary",null,"click to see the solution"),(0,o.kt)("div",null,(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/ex-base-reusable-component?file=src%2Fapp%2Fuser-profile-card%2Fuser-profile-card.component.spec.ts,src%2Fapp%2Fuser-profile-card%2Fuser-profile-card.component.ts"},(0,o.kt)("img",{parentName:"a",src:"https://developer.stackblitz.com/img/open_in_stackblitz.svg",alt:"Open in StackBlitz"}))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="user-profile-card.component.ts"',title:'"user-profile-card.component.ts"'},"import {User} from '@shared/models'\nimport {Component, EventEmitter, Input, Output, Signal, computed, signal} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\n@Component({\n    selector: 'app-user-profile-card',\n    standalone: true,\n    imports: [CommonModule],\n    templateUrl: './user-profile-card.component.html',\n    styleUrls: ['./user-profile-card.component.scss'],\n})\nexport class UserProfileCardComponent {\n    /**\n     * HINT: This way to input will be changed on angular 17, when we can use signal components.\n     * @required\n     */\n    @Input({alias: 'user', required: true, transform: (user: User) => signal<User>(user)})\n    user!: Signal<User>;\n\n    /**\n     * Emitts when the button was clicked.\n     */\n    @Output() readonly showMoreClicked = new EventEmitter<void>();\n\n    /**\n     * @returns text containing the first letter of the {@link User.firstName} and first letter of the {@link User.lastName}.\n     *\n     * example:\n     *\n     * firstName: 'Nora'; lastName: 'Crawford' ==> \"NC\"\n     */\n    readonly userInitials = computed(() =>\n        this.user\n            ? `${this.user().firstName.trimStart().slice(0, 1).toUpperCase()}${this.user().lastName.trimStart().slice(0, 1)}`\n            : ''\n    );\n\n    /**\n     * @returns text containing \"{@link User.firstName} _space_ {@link User.lastName}\"\n     */\n    readonly fullName = computed(() => (this.user ? `${this.user().firstName} ${this.user().lastName}` : '\u2014'));\n\n    /**\n     * triggers emit\n     */\n    onShowDropdownClicked() {\n        this.showMoreClicked.emit();\n    }\n}\n\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="user-profile-card.component.spec.ts"',title:'"user-profile-card.component.spec.ts"'},"import {User, UserProfileCardComponent} from './user-profile-card.component';\nimport {MockBuilder, MockRender, MockedComponentFixture, ngMocks} from 'ng-mocks';\nimport {firstValueFrom} from 'rxjs';\n\ndescribe('UserProfileCardComponent', () => {\n    let component: UserProfileCardComponent;\n    let fixture: MockedComponentFixture<UserProfileCardComponent>;\n\n    beforeEach(() => MockBuilder(UserProfileCardComponent));\n\n    it('should create', () => {\n        fixture = MockRender(UserProfileCardComponent, {user: mockUserA} as any);\n        component = fixture.point.componentInstance;\n        fixture.detectChanges();\n        expect(component).toBeTruthy();\n    });\n\n    describe('public data', () => {\n        beforeEach(() => {\n            fixture = MockRender(UserProfileCardComponent, {user: mockUserA} as any);\n            component = fixture.point.componentInstance;\n            fixture.detectChanges();\n        });\n\n        describe('user', () => {\n            it('should provide the correct user', () => {\n                expect(component.user()).toStrictEqual(mockUserA);\n            });\n\n            it('should provide correct initials', () => {\n                expect(component.userInitials()).toEqual('NC');\n            });\n\n            it('should provide correct full name', () => {\n                expect(component.fullName()).toEqual('Nora Crawford');\n            });\n        });\n    });\n\n    describe('ui tests', () => {\n        it('should match snapshot', () => {\n            fixture = MockRender(UserProfileCardComponent, {user: mockUserB} as any);\n            fixture.detectChanges();\n            expect(fixture.point.nativeElement).toMatchSnapshot();\n        });\n\n        it('should show initials within `.upc__avatar`', () => {\n            fixture = MockRender(UserProfileCardComponent, {user: mockUserC} as any);\n            fixture.detectChanges();\n\n            const avatarComponent = ngMocks.find('.upc__avatar');\n            expect(avatarComponent.nativeElement.textContent).toContain('LY');\n        });\n\n        describe('show more', () => {\n            let onShowMoreClickSpy: jest.SpyInstance;\n\n            beforeEach(() => {\n                fixture = MockRender(UserProfileCardComponent, {user: mockUserD} as any);\n                component = fixture.point.componentInstance;\n                fixture.detectChanges();\n\n                // Arrange\n                onShowMoreClickSpy = jest.spyOn(component, 'onShowDropdownClicked');\n            });\n\n            it('should trigger click handler on click event', () => {\n                const showMoreBtn = ngMocks.find('button.upc__show-dropdown');\n                // Act\n                ngMocks.click(showMoreBtn);\n                // Assert\n                expect(onShowMoreClickSpy).toHaveBeenCalledTimes(1);\n            });\n\n            it('should trigger output event on click show more', async () => {\n                const asyncOutput = firstValueFrom(component.showMoreClicked.asObservable());\n                const showMoreBtn = ngMocks.find('button.upc__show-dropdown');\n                // Act\n                ngMocks.click(showMoreBtn);\n                // Assert\n                const event = await asyncOutput;\n                expect(event).toBe(void 0);\n            });\n        });\n    });\n});\n\nconst mockUserA: User = {firstName: 'Nora', lastName: 'Crawford', mail: 'nora.crawford@dev.io'};\nconst mockUserB: User = {firstName: 'Erin', lastName: 'Phillips', mail: 'erin.phillips@devs.google.de'};\nconst mockUserC: User = {firstName: 'Larissa', lastName: 'Young', mail: 'young.larissa@stanford.edu'};\nconst mockUserD: User = {firstName: 'Frank', lastName: 'Roberson', mail: 'franky-rob@dude.cool'};\n")))))}u.isMDXComponent=!0},659:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/task_create_component_draft-2ed6441908580f21b6852df4ab9c33ec.png"}}]);